<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="FamilyTogether.App.Pages.PermissionsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Permisos Requeridos"
             BackgroundColor="{DynamicResource Primary}">
    
    <ScrollView>
        <VerticalStackLayout Spacing="30" Padding="30,20">
            
            <!-- TÃ­tulo Material Design -->
            <VerticalStackLayout Spacing="16" Margin="0,32,0,24">
                <Label Text="ðŸ”"
                       FontSize="48"
                       HorizontalOptions="Center"
                       TextColor="{StaticResource OnPrimary}" />
                <Label Text="ConfiguraciÃ³n de Permisos"
                       Style="{StaticResource MaterialHeadlineMedium}"
                       HorizontalOptions="Center"
                       TextColor="{StaticResource OnPrimary}" />
                
                <Label Text="Para funcionar correctamente, FamilyTogether necesita los siguientes permisos:"
                       Style="{StaticResource MaterialBodyLarge}"
                       HorizontalOptions="Center"
                       TextColor="{StaticResource OnPrimary}"
                       Opacity="0.9"
                       HorizontalTextAlignment="Center" />
            </VerticalStackLayout>

            <!-- Permisos de ubicaciÃ³n Material Design -->
            <Frame Style="{StaticResource MaterialElevatedCard}">
                
                <VerticalStackLayout Spacing="16">
                    
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                        <Ellipse Grid.Column="0"
                                 Fill="{StaticResource PrimaryContainer}"
                                 WidthRequest="48"
                                 HeightRequest="48" />
                        <Label Grid.Column="0"
                               Text="ðŸ“"
                               FontSize="24"
                               HorizontalOptions="Center"
                               VerticalOptions="Center" />
                        
                        <VerticalStackLayout Grid.Column="1" Spacing="4" VerticalOptions="Center">
                            <Label Text="UbicaciÃ³n"
                                   Style="{StaticResource MaterialTitleMedium}"
                                   TextColor="{StaticResource Primary}" />
                            <Label Text="Necesario para compartir tu ubicaciÃ³n con la familia"
                                   Style="{StaticResource MaterialBodyMedium}"
                                   TextColor="{StaticResource OnSurfaceVariant}" />
                        </VerticalStackLayout>
                        
                        <Label Grid.Column="2"
                               x:Name="LocationStatusLabel"
                               Text="âŒ"
                               FontSize="24"
                               VerticalOptions="Center" />
                    </Grid>
                    
                    <Button x:Name="LocationPermissionButton"
                            Text="Conceder Permiso de UbicaciÃ³n"
                            Style="{StaticResource MaterialFilledButton}"
                            Clicked="OnLocationPermissionClicked" />
                    
                </VerticalStackLayout>
                
            </Frame>

            <!-- OptimizaciÃ³n de baterÃ­a Material Design -->
            <Frame Style="{StaticResource MaterialElevatedCard}">
                
                <VerticalStackLayout Spacing="16">
                    
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                        <Ellipse Grid.Column="0"
                                 Fill="{StaticResource WarningContainer}"
                                 WidthRequest="48"
                                 HeightRequest="48" />
                        <Label Grid.Column="0"
                               Text="ðŸ”‹"
                               FontSize="24"
                               HorizontalOptions="Center"
                               VerticalOptions="Center" />
                        
                        <VerticalStackLayout Grid.Column="1" Spacing="4" VerticalOptions="Center">
                            <Label Text="OptimizaciÃ³n de BaterÃ­a"
                                   Style="{StaticResource MaterialTitleMedium}"
                                   TextColor="{StaticResource Warning}" />
                            <Label Text="Permite que la app funcione en segundo plano"
                                   Style="{StaticResource MaterialBodyMedium}"
                                   TextColor="{StaticResource OnSurfaceVariant}" />
                        </VerticalStackLayout>
                        
                        <Label Grid.Column="2"
                               x:Name="BatteryStatusLabel"
                               Text="âŒ"
                               FontSize="24"
                               VerticalOptions="Center" />
                    </Grid>
                    
                    <Button x:Name="BatteryOptimizationButton"
                            Text="Desactivar OptimizaciÃ³n"
                            Style="{StaticResource MaterialFilledButton}"
                            BackgroundColor="{StaticResource Warning}"
                            TextColor="{StaticResource OnWarning}"
                            Clicked="OnBatteryOptimizationClicked" />
                    
                </VerticalStackLayout>
                
            </Frame>

            <!-- InformaciÃ³n adicional Material Design -->
            <Frame Style="{StaticResource MaterialCard}"
                   BackgroundColor="{StaticResource SecondaryContainer}">
                
                <VerticalStackLayout Spacing="12">
                    <HorizontalStackLayout Spacing="8">
                        <Label Text="â„¹ï¸"
                               FontSize="20" />
                        <Label Text="InformaciÃ³n Importante"
                               Style="{StaticResource MaterialTitleMedium}"
                               TextColor="{StaticResource OnSecondaryContainer}" />
                    </HorizontalStackLayout>
                    
                    <VerticalStackLayout Spacing="8">
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="â€¢"
                                   Style="{StaticResource MaterialBodyMedium}"
                                   TextColor="{StaticResource OnSecondaryContainer}" />
                            <Label Text="Los permisos de ubicaciÃ³n son necesarios para el funcionamiento bÃ¡sico"
                                   Style="{StaticResource MaterialBodyMedium}"
                                   TextColor="{StaticResource OnSecondaryContainer}"
                                   HorizontalOptions="FillAndExpand" />
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="â€¢"
                                   Style="{StaticResource MaterialBodyMedium}"
                                   TextColor="{StaticResource OnSecondaryContainer}" />
                            <Label Text="La exclusiÃ³n de optimizaciÃ³n de baterÃ­a mejora la precisiÃ³n"
                                   Style="{StaticResource MaterialBodyMedium}"
                                   TextColor="{StaticResource OnSecondaryContainer}"
                                   HorizontalOptions="FillAndExpand" />
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="â€¢"
                                   Style="{StaticResource MaterialBodyMedium}"
                                   TextColor="{StaticResource OnSecondaryContainer}" />
                            <Label Text="Puedes cambiar estos permisos en cualquier momento desde ConfiguraciÃ³n"
                                   Style="{StaticResource MaterialBodyMedium}"
                                   TextColor="{StaticResource OnSecondaryContainer}"
                                   HorizontalOptions="FillAndExpand" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
                
            </Frame>

            <!-- Botones de acciÃ³n Material Design -->
            <VerticalStackLayout Spacing="16" Margin="0,32,0,0">
                
                <Button x:Name="ContinueButton"
                        Text="Continuar"
                        Style="{StaticResource MaterialFilledButton}"
                        BackgroundColor="{StaticResource OnPrimary}"
                        TextColor="{StaticResource Primary}"
                        IsEnabled="False"
                        Clicked="OnContinueClicked" />
                
                <Button x:Name="SkipButton"
                        Text="Configurar DespuÃ©s"
                        Style="{StaticResource MaterialOutlinedButton}"
                        TextColor="{StaticResource OnPrimary}"
                        BorderColor="{StaticResource OnPrimary}"
                        Clicked="OnSkipClicked" />
                
            </VerticalStackLayout>
            
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>